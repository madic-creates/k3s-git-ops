apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
    name: checkmk-ingress
    annotations:
        traefik.ingress.kubernetes.io/router.entrypoints: web,websecure
        traefik.ingress.kubernetes.io/router.tls: "true"
        traefik.ingress.kubernetes.io/router.middlewares: traefik-redirect@kubernetescrd,traefik-plugin-redirect-location@kubernetescrd
        #, authelia-forwardauth-authelia@kubernetescrd
spec:
    ingressClassName: traefik
    tls:
        - hosts:
            - ENC[AES256_GCM,data:zHoe//dItz4637x7ZKBsl7xq+neOKp1n05aftYc=,iv:EC/M03RPiU1x01FbNJM+A+jQXzo7FWPaxDUo7M7WUPw=,tag:W6LpdAxvnsqwqmTUFTHnyQ==,type:str]
          secretName: wildcard-cloudflare-production-02
    rules:
        - host: ENC[AES256_GCM,data:Yau3e2tsnf7T+Jc+ZAb3FQhRrCf3c82s0rEmj78=,iv:NmU2CRWwmQ4bO45tAtg1KCl3mzTPfk6qgX7HZe+Qiuk=,tag:Fd3v3zJQ8UU7R493L+L7Ig==,type:str]
          http:
            paths:
                - path: /cmk
                  pathType: Prefix
                  backend:
                    service:
                        name: checkmk-service
                        port:
                            number: 5000
                - path: /thruk
                  pathType: Prefix
                  backend:
                    service:
                        name: checkmk-service
                        port:
                            number: 8001
sops:
    age:
        - recipient: age1d2g7tgqpfvxulsusn3m608h60h2hne7yqwv5nh5nd24z6h0hgq0skjkhw8
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBJQTFvZ0RDa29VRE9tTk5x
            NmRybTl0QndhTGo5U1BYNGdjNUFFMXViWFRVCnBPTVduUnFka2ZvalJOSE5zVmpp
            M1JORjVzT296ZDl3czNjSjdya2tzNGMKLS0tIG1YbEc2QmFHMytzYkYxUVBvdER1
            cWcyenFGNythS0ttbFV4bTBvdEdIUDgKQoFdrWuNEr1j6pEta4MRGquQDtt7Qvdz
            qF7kEG7GsJriYTYTx124vpJRyy0m6vkC5cgSkMufRnI7H+FH/dTNUA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1q522xtgjrmvr43w7um5rh02ta3yfns635680hz4m7uhw0nfqj5zqgxnz27
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA4VWJqTnAyN1dLTDZWTmVI
            NERUZFZ3UXFaaGM2MFk5QjRXUWNVWTg1ZVVRCjVNdVBoNEFRZnlzWTR5ay9aaGsw
            WFA5TGJNRHB6ZDlrYzE1UzZ3U01vREEKLS0tIDBpNmw5SVN5dTMvcjlROGJuS29P
            ZHVpN2lVanlKdEhhYkpyR2FtQ0pZYU0KcjNhaNiGl86jquHT8x0XnZM3QrOhyUUE
            EcoXUqvuy60vXS0ia8PdaK1HC+8m9+fToH4Yzlnyy4NBdhNzCbzKkg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-11-17T09:58:49Z"
    mac: ENC[AES256_GCM,data:9Lc7S9zAbxfw0t98rI9h2bM34uZZ8S555GZVRMd1GA8xJDlthmUART35uSDXVm3XsHlJ4+ur7N83Mbi6P/X4Vyi3owRkr0fzyqeXGFBqYiiShE8w7f9kWkN5FoQpfPS2V5sRJHoGolHLNGzWSce+Zu/czkKFR/b/ctxtXh4wT48=,iv:rmBbvF8HdV9Gf5v8cKsxg1Q5hUuO6uaw/8W0G6m9ovs=,tag:QC46czdYh9gUL7rJsYCFrw==,type:str]
    encrypted_regex: ^(data|stringData|email|dnsNames|.*(H|h)osts?|hostname|username|password|url|issuer|argocdServerAdminPassword|oidc.config|commonName|literals|.*awsAccessKeyId|.*awsSecretAccessKey|.*defaultAdminPassword|apiToken|accountId|rootPassword|replicationPassword|adminPassword|root_url|client_secret|auth_url|api_url|PIHOLE_DOMAIN|TUNNEL_DNS_UPSTREAM|customDnsEntries|securityTokenKey|emailRecipients|.*provider_url|.*redirect_url|.*accesskeyEncryption|SEMAPHORE_WEB_ROOT|token|cookieEncryption|cookieHash|^ldap|.*match)$
    version: 3.11.0
