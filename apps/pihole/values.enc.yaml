image:
    repository: pihole/pihole
    #tag: 2024.07.0
    pullPolicy: IfNotPresent
serviceDns:
    mixedService: true
    annotations:
        kube-vip.io/loadbalancerIPs: 192.168.1.232
    # type LoadBalancer with externalTrafficPolicy Local
    # requires 192.168.1.232 on the same node as the pod
    type: LoadBalancer
    #externalTrafficPolicy: Cluster
    #type: ClusterIP
serviceDhcp:
    annotations:
        kube-vip.io/loadbalancerIPs: 192.168.1.232
    type: LoadBalancer
virtualHost: ENC[AES256_GCM,data:2ZM+suOvBuC39IjGwcmtNhHsdM9ZA3A=,iv:i4l4RrAak34xVwyTDLB8Vykrb+eK4+Mku/UUWGmcUMg=,tag:FKeNm1GfmXCrgxc4HpQuaQ==,type:str]
ingress:
    enabled: true
    ingressClassName: traefik
    hosts:
        - ENC[AES256_GCM,data:qXcpOJdLcqi8hHjAdlWGCqiiNXOiW7g=,iv:p5neb9Lb7R5W4g8JMGOxuzzgAbmtx0mkqkaanegVUHg=,tag:JyWK5DbaXLLgKl9DSFWhLg==,type:str]
    tls:
        - secretName: wildcard-cloudflare-production-01
          hosts:
            - ENC[AES256_GCM,data:PDoOd8ZsHZi7+OgUmGwyVUVDT2XoJFk=,iv:hx2oPSnmxXeYOswYEfD4n+5XslstNELUL0QLvnKa1fM=,tag:4b/RgMck7qHgD655FOiMPw==,type:str]
    annotations:
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
        traefik.ingress.kubernetes.io/router.tls: "true"
        traefik.ingress.kubernetes.io/router.middlewares: authelia-forwardauth-authelia@kubernetescrd,root-to-admin@kubernetescrd
    path: /
admin:
    existingSecret: pihole-admin-password
    passwordKey: password
persistentVolumeClaim:
    enabled: true
    accessModes:
        - ReadWriteOnce
    size: 1Gi
    storageClass: longhorn
resources:
    limits:
        cpu: 1000m
        memory: 256Mi
    requests:
        cpu: 100m
        memory: 128Mi
extraEnvVars:
    TZ: Europe/Berlin
    #FTLCONF_LOCAL_IPV4: 192.168.1.232
    FTLCONF_dns_dnssec: true
    FTLCONF_dns_bogusPriv: true
    FTLCONF_dns_domainNeeded: true
    FTLCONF_dhcp_start: 192.168.1.50
    FTLCONF_dhcp_end: 192.168.1.200
    FTLCONF_dhcp_router: 192.168.1.1
    FTLCONF_dhcp_leaseTime: 12
    FTLCONF_dns_domain: neese-web.de
    FTLCONF_dhcp_rapidCommit: true
    FTLCONF_webserver_interface_boxed: false
    #FTLCONF_MOZILLA_CANARY: true
    #FTLCONF_BLOCK_ICLOUD_PR: true
DNS1: 127.0.0.1:5053
# Not required because secured via authelia oidc
admin:
    enabled: false
doh:
    enabled: true
    pullPolicy: IfNotPresent
    envVars:
        TUNNEL_DNS_UPSTREAM: ENC[AES256_GCM,data:Jsh3xKbuydGvqleOGPBWPRr8sbmiFkOYhkpzuStIWsUKyHYi,iv:k/buiAkeGNEufCq+4lQ2nj+hsbGfx8iWek52XDe9lTU=,tag:PW0KFkc2r5d7NaTeCsoyPw==,type:str]
dnsmasq:
    # Contains internal wildcard domains:
    # - address=/.example.com/192.168.1.45
    # - 'address=/.example.com/::'
    # - address=/.k8s.example.com/192.168.1.231
    # - 'address=/.k8s.example.com/::'
    customDnsEntries:
        - ENC[AES256_GCM,data:2kwm/xJOc3VyxTirxPuKFFHDncxKXVEVIXdAjihozjxrJTM=,iv:VGzkFX+P3hNmOUCVuSZWQX3K2tni4IRtW9VA2vWAuNw=,tag:zPp6GZvVhrNGZcrHMX8gaQ==,type:str]
        - ENC[AES256_GCM,data:C+eL+GAIs6vdlilkj7CDFx6dV4h0Khv0og==,iv:xO686QF/El6LBmZ9+uKokxhFohqm2W1FilDUf4FsINQ=,tag:7UTv3xkz70hgaUaZt/ShFA==,type:str]
        - ENC[AES256_GCM,data:A6kqR6HNugDnYNRToMtCHzOU+iqBY4NQv/L4R/gfuRFUI/YjL5IL/A==,iv:/VxnEnZ1FUhhOInd7DJ36RFKsXe7qIE7u6CImvXWI6k=,tag:6kfaHPFqJYP3czcl+vYppw==,type:str]
        - ENC[AES256_GCM,data:ez8zir+TEFet9oMMCDZAA0+hGMcXnoQ1oHbBuug=,iv:xKHQCudB7aO5VVkc0Uwxkv2eaTr4AB3UgxcrIDtLuaw=,tag:bKwRXeosvegdQt8IHojjkg==,type:str]
    customSettings:
        - dhcp-option=252,"\n"
        - dhcp-option=vendor:MSFT,2,1i
        # DNS
        - dhcp-option=6,192.168.1.232,192.168.1.1
        # NTP
        - dhcp-option=42,192.168.1.1
        - dhcp-range=::,ra-names
        - server=/geekbundle.org/192.168.1.1
        - ptr-record=1.1.168.192.in-addr.arpa.,"despair"
        # TFTP Boot
        - dhcp-match=set:ipxe,175
        - dhcp-boot=tag:!ipxe,ipxe.pxe,dns01,192.168.1.11
        - dhcp-match=set:efi-x86_64,option:client-arch,7
        - dhcp-boot=tag:efi-x86_64,ipxe.efi,dns01,192.168.1.11
        - dhcp-boot=http://192.168.1.45:8043/boot.ipxe
        # DHCP Reservation with different dns server
        - dhcp-option=net:customdns,6,9.9.9.9,1.1.1.1
        - dhcp-host=net:customdns,EC:79:49:51:64:16,192.168.1.187,ipl06002-lan
        - dhcp-host=net:customdns,F4:4E:E3:2C:C2:B6,192.168.1.56,ipl06002-wlan
        # HTTP Boot
        #- dhcp-match=set:efi-x86_64_http,option:vendor-class-identifier,0,10
        #- dhcp-boot=tag:efi-x86_64_http,"http://192.168.1.45:8043/ipxe.efi"
        #- dhcp-boot=tag:!ipxe,"http://192.168.1.45:8043/ipxe.pxe"
# Not required. We're running a dhcp relay via host network.
#hostNetwork: "true"
capabilities:
    add:
        - NET_ADMIN
        - CAP_SYS_TIME
        - CAP_SYS_NICE
persistentVolumeClaim:
    enabled: true
    storageClass: longhorn
    size: "10737418240"
podDnsConfig:
    enabled: true
    policy: None
    nameservers:
        - 127.0.0.1
        - 1.1.1.1
#affinity:
#  nodeAffinity:
#    requiredDuringSchedulingIgnoredDuringExecution:
#      nodeSelectorTerms:
#        - matchExpressions:
#            - key: kubernetes.io/hostname
#              operator: In
#              values:
#                - node03
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1d2g7tgqpfvxulsusn3m608h60h2hne7yqwv5nh5nd24z6h0hgq0skjkhw8
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSAwSjFPVDZjeVVZeCt0bUtX
            N3YwbGk2UlhnMmhobU5ZaDlrcmM4S1lTRmdnCnU0OVdNbWx0bWMzRUhic3N5TE1J
            UTlvQ2RYeDhzclovNGtwNmdUVEdyWkkKLS0tIHVRYUJMc3FKQ2EwaHZiYkljZTRR
            TzhqNm1nWVhob3M0b2JVb2NYYzhhamsKeFD7JkEhA+etTa9rjH76D3aZFgfqwCtw
            Y4oRRroYeeGg7FN2XvFqPMYMs722E25BSUURH4DLeMzY/lLXtl1zvg==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1q522xtgjrmvr43w7um5rh02ta3yfns635680hz4m7uhw0nfqj5zqgxnz27
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBDelkvOXFvaFZyL0psVW9i
            RjdsV3RIYXFnekxtemJvcXRtaUlFUzhndkZnCm44SGV1NTR2dXEyT1dOOGhlckpw
            bmxVRkZxanRITzdYdUk0Z2ZtYmhocEEKLS0tIE9PNTRsdlhrVWFjNjBrOUwzUTY1
            RW1mV21oVkwzWlNwOTlvaGZ1WStyV0UKKTb/sVaXyHjzsrGwL0x3KetDxAt6daXc
            VUnEu1chWVJJ8eIcZ+t+UmpioXrje2MK5NSYI60446ZA4zxymFLZmA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-03-25T21:37:03Z"
    mac: ENC[AES256_GCM,data:M4dmFcHJf95kLU7IE1W0VZi/s7eE/HNmedYUCr0IbKSedfAE+6Slb7MYSK5KmRshIRKhTLQIXNFRnm5pQZ0Zu8EHgxQyDanxacFkfsFWo8+J9wYup93Ot82Y7mW444ZswWG1Wk0NILPr01tBeCIbvcaMMeUS8Fp6uLLf8C9zz4k=,iv:a3j70mKjZZX0EW7EB6OXNj2OxOmXp+fsEU4I4bPcNwY=,tag:EOFTMGAuOIi+wbxD27blsA==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|email|dnsNames|.*(H|h)osts?|hostname|username|password|url|issuer|argocdServerAdminPassword|oidc.config|commonName|literals|.*awsAccessKeyId|.*awsSecretAccessKey|.*defaultAdminPassword|apiToken|accountId|rootPassword|replicationPassword|adminPassword|root_url|client_secret|auth_url|api_url|PIHOLE_DOMAIN|TUNNEL_DNS_UPSTREAM|customDnsEntries|securityTokenKey|emailRecipients)$
    version: 3.8.1
