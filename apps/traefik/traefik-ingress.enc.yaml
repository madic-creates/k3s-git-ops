# HTTPS Ingress
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
    name: traefik
    namespace: kube-system
    annotations:
        # HTTPS as entry point
        traefik.ingress.kubernetes.io/router.entrypoints: web239, websecure239
        # Enable TLS
        traefik.ingress.kubernetes.io/router.tls: "true"
        # Use authelia authentication
        traefik.ingress.kubernetes.io/router.middlewares: authelia-forwardauth-authelia@kubernetescrd, traefik-blockiframe@kubernetescrd
spec:
    tls:
        - hosts:
            - ENC[AES256_GCM,data:UxebQvmDefLScaxIiy6cqA1jakYLsguRJqi7LG0=,iv:uKT+Xtnld0zCw6+O2AL7I4SKjbLTA5xSLqWFCVKN5Bc=,tag:zdiU+K5NCq96FKCWsOz20Q==,type:str]
          secretName: wildcard-cloudflare-production-02
    rules:
        - host: ENC[AES256_GCM,data:1IdE75Xp2iXEphx15Y0mEfUK60AC3NnfdbuiNPI=,iv:Mn6NtoD/Jml99wwWxxlzZBpSTtNJzUAMFGF4p5SsAkc=,tag:yrChpOlN2lN62hHoNuPn0Q==,type:str]
          http:
            paths:
                - path: /
                  pathType: Prefix
                  backend:
                    service:
                        name: traefik-dashboard
                        port:
                            number: 9000
sops:
    age:
        - recipient: age1d2g7tgqpfvxulsusn3m608h60h2hne7yqwv5nh5nd24z6h0hgq0skjkhw8
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSAwZ1h1anVWMEdYVmd4cTFN
            UmdHaFNBNFlYd1VKVFhlcENUOWpwNmNnaVdBCklac1JNVitKZ1J1bGE4bnIvYlVF
            VkhrRXo5UGRoSVg2UnNoYW5WOUxDdGsKLS0tIEtSbFpxRnFxNjNwWXVwZmZwTzFv
            Zk54eWh2ZkZGQWlBb2xZc0I1RE9jYTgKK6ZU/4mjioECdj12JfX6YfnEN45wIvhX
            MfAF7UxKAZyVSpqe33wKdlxzHKNPcliOpaE42/JmEZp8ItGwjFW9Ow==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1q522xtgjrmvr43w7um5rh02ta3yfns635680hz4m7uhw0nfqj5zqgxnz27
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBBV0J6WHROWWdHelAyYzBV
            MmJ3WkMwdXM1UEhPV2p4VExKbEx1SnlSRUJnCkdtZERVM2F3a1BXOTI4U3dBMTNr
            VUErTUNFcTJ4dnlxTFVQbjl2T09McjAKLS0tIDRjWjA1OXpRVGJBdEpyYmFBOVNa
            UVo2U3M2RGJmSnFGUTBKYThmM3pjTW8KD6B9nygpKX0ptpDNL87vtWRkOB1hmrrH
            BV/TTmJlmLl3OA6m38kMKTA7O0FH6hrI9GnKuISFWyDVmZov7CGsEQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-10-13T19:32:32Z"
    mac: ENC[AES256_GCM,data:M1sJFY4QBPcrOjPveNLA+S4gkhygJB951nGVB46bh7q73VNzPTqsfibcoor97C0P/P88zD9d4xPn1kDNPsadMVdOf06snL+u44ZM8eAaPWjCLgVoc73bPMdcNnQdBXaDcWQ91ahSAWOQ8ItV8F6dFIRJ1O1Irk0HeVlPue2Pdu0=,iv:022JwUJQuKmSTAkbRvTWb4s4OuMsSGOKVnqHKGVTbBg=,tag:avmD3e/xy8RWF4+kQMHU7g==,type:str]
    encrypted_regex: ^(data|stringData|email|dnsNames|.*(H|h)osts?|hostname|username|password|url|issuer|argocdServerAdminPassword|oidc.config|commonName|literals|.*awsAccessKeyId|.*awsSecretAccessKey|.*defaultAdminPassword|apiToken|accountId|rootPassword|replicationPassword|adminPassword|root_url|client_secret|auth_url|api_url)$
    version: 3.11.0
