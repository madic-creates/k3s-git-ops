apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
    name: unifi-controller
    namespace: media
    annotations:
        argocd.argoproj.io/sync-wave: "30"
        traefik.ingress.kubernetes.io/router.entrypoints: web239,websecure239
        traefik.ingress.kubernetes.io/router.tls: "true"
        traefik.ingress.kubernetes.io/router.middlewares: traefik-redirect@kubernetescrd
spec:
    ingressClassName: traefik
    tls:
        - hosts:
            - ENC[AES256_GCM,data:HKRYifGiwbboaWQcpo9Bj5r5g4XFkNjQrnam,iv:tFPvxW5iRypT9LfxzOAX2V29MuQRadIGOsFya+vkc3Q=,tag:7SWCGeYLHNell/I0DDAmIg==,type:str]
          secretName: wildcard-cloudflare-production-02
    rules:
        - host: ENC[AES256_GCM,data:VAGoH/yiYWUhp2XLJBuyJgxgoOB9EQVUa5ie,iv:0Fnd52MU5KrFeRmYPKAGeBfLXi0gwT3pZYdL+F8s1YY=,tag:u7VQZxxzafNUKZiHgyhRdQ==,type:str]
          http:
            paths:
                - path: /
                  pathType: Prefix
                  backend:
                    service:
                        name: unifi-controller
                        port:
                            number: 8443
sops:
    age:
        - recipient: age1d2g7tgqpfvxulsusn3m608h60h2hne7yqwv5nh5nd24z6h0hgq0skjkhw8
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSByM2d6QUMxaVRFWkd3Z3Q0
            dm9qMDBCSTNWSjQ5cVVpcFlVSHdVb2lnTFdZCnV3VjUwWUNmd1lVUW82cGtuZExp
            dSt5RHYzakdET0RvYlFEZ1BiUmFIR2cKLS0tIFdMcm9KNTBPZkZSTElRQ3NBb1BB
            YVlhUVJnc0wySDFvbTIvb3NSdWdDK3MKHRrkLC8vJ0IZJmGVZXoCDIdtVaePSmph
            SAhUc8e6ZIi7e7Ig2mQw1itrVxlUxopiHm4TfBdYeiCZeqfjx4awlw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1q522xtgjrmvr43w7um5rh02ta3yfns635680hz4m7uhw0nfqj5zqgxnz27
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBqSjVqWEFZeXFzVWRBeHNC
            Tkk5NmJKYmpCQjhmS3Zpa1BYVHpJeFFHSVZNCjJZVzl0VUlsNE5HU2dxWGZWTWsv
            REJPUmsrT0ZickoxWWFOVUdGZVR2eE0KLS0tIFhEaHRBYjVFS0g3VUNrWkpaZytW
            UmV2bkpvdGJoQ3htOG5ORFk3allxbGsKgSLK31vK2Fi//y3dshgDAr01Zag2V1ww
            kjVwvOC6MNZoMpiuRdzgPPNG4K/oam0AGB3Q9lG6tMqbR4AuK3f4BA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-12-03T13:52:46Z"
    mac: ENC[AES256_GCM,data:hqLDVX3YBAInuqHF31TuWG0QMjE01yrXX1hy/ZOuiWPmDRDC1d8okq99+TZ7Gvo8RHpWPVhIEbacQ7aGYNrHabQVRq4kxQXMLN6vKQ77UI/zJ0OFfDR2ThVB7NGeEAPdOBB//errnnufOTEeaP/2fBQuKU1YEAYtTKjqvTEtTFI=,iv:O2XrC7PzmJtk2vQq31QYFdYfS2jiy+Fx0M1Leiw4sP4=,tag:gdDAWfTpWkLv5DRFe9prCg==,type:str]
    encrypted_regex: ^(data|stringData|email|dnsNames|.*(H|h)osts?|hostname|username|password|url|issuer|argocdServerAdminPassword|oidc.config|commonName|literals|.*awsAccessKeyId|.*awsSecretAccessKey|.*defaultAdminPassword|apiToken|accountId|rootPassword|replicationPassword|adminPassword|root_url|client_secret|auth_url|api_url|PIHOLE_DOMAIN|TUNNEL_DNS_UPSTREAM|customDnsEntries|securityTokenKey|emailRecipients|.*provider_url|.*redirect_url|.*accesskeyEncryption|SEMAPHORE_WEB_ROOT|token|cookieEncryption|cookieHash|^ldap|.*match)$
    version: 3.11.0
