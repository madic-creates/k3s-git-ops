serviceDns:
    mixedService: true
    annotations:
        kube-vip.io/loadbalancerIPs: 192.168.1.234
    # type LoadBalancer with externalTrafficPolicy Local
    # requires 192.168.1.232 on the same node as the pod
    type: LoadBalancer
    #externalTrafficPolicy: Cluster
    #type: ClusterIP
serviceDhcp:
    enabled: false
virtualHost: ENC[AES256_GCM,data:0G+2HvS9jGxwLx0qurE20XdY8nFb4NgftA==,iv:Ff1loZppyjI6a5Kb0W4wMX2rFHtdG8egI7yeLdEXIOw=,tag:RiYEv6V3orCs1OiEFlucTQ==,type:str]
ingress:
    enabled: true
    ingressClassName: traefik
    hosts:
        - ENC[AES256_GCM,data:YvkjOTq0JPHwpJGrtSVhJO9aD6m5qg31Zg==,iv:rfliLY+6VBSlNFWUx5uM413hKlRihvAjz6QtqLGMm6U=,tag:qvXAHdFaCxTilx1+x0O2MA==,type:str]
    tls:
        - secretName: wildcard-cloudflare-production-01
          hosts:
            - ENC[AES256_GCM,data:TNBva3zcHp29JUhDB+MKtEQVnzWQMfASag==,iv:NgKTdH9DMTwxLdisTFRtsEYBWdpG31U0D10JHy17zps=,tag:yR0yiEk0fZxZQ6PRX0u6xg==,type:str]
    annotations:
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
        traefik.ingress.kubernetes.io/router.tls: "true"
        traefik.ingress.kubernetes.io/router.middlewares: authelia-forwardauth-authelia@kubernetescrd, traefik-root-to-admin@kubernetescrd
resources:
    limits:
        cpu: 1000m
        memory: 256Mi
    requests:
        cpu: 100m
        memory: 128Mi
extraEnvVars:
    TZ: Europe/Berlin
    FTLCONF_dns_bogusPriv: true
    FTLCONF_dns_domainNeeded: true
    FTLCONF_dns_domain: neese-web.de
    FTLCONF_webserver_interface_boxed: false
DNS1: 127.0.0.1:5053
DNS2: ""
# Not required because secured via authelia oidc
admin:
    enabled: false
doh:
    enabled: true
    envVars:
        TUNNEL_DNS_UPSTREAM: ENC[AES256_GCM,data:8zqnOEdYjREr+uShfiXCfVU39g6tb5WW+0TNdM+cZ/QAsVZz1vU=,iv:TSX7GEA/jgBcZvuCqEd0kWT3g43JFn6jybSzSadc6Sk=,tag:WGtuCwgNLYeQFvX2/C0CJQ==,type:str]
podDnsConfig:
    enabled: true
    policy: None
    nameservers:
        - 127.0.0.1
        - 1.1.1.1
capabilities:
    add:
        - NET_ADMIN
        - CAP_SYS_TIME
        - CAP_SYS_NICE
persistentVolumeClaim:
    enabled: true
    existingClaim: pihole-02
dnsmasq:
    customSettings:
        - dhcp-option=252,"\n"
        - dhcp-option=vendor:MSFT,2,1i
        # DNS
        #- dhcp-option=6,192.168.1.232,192.168.1.1
        - dhcp-option=6,192.168.1.232,192.168.1.234
        # NTP
        - dhcp-option=42,192.168.1.1
        - dhcp-range=::,ra-names
        - server=/geekbundle.org/192.168.1.1
        - ptr-record=1.1.168.192.in-addr.arpa.,"despair"
        # TFTP Boot
        - dhcp-match=set:ipxe,175
        - dhcp-boot=tag:!ipxe,ipxe.pxe,dns01,192.168.1.11
        - dhcp-match=set:efi-x86_64,option:client-arch,7
        - dhcp-boot=tag:efi-x86_64,ipxe.efi,dns01,192.168.1.11
        - dhcp-boot=http://192.168.1.45:8043/boot.ipxe
        # DHCP Reservation with different dns server
        - dhcp-option=net:customdns,6,9.9.9.9,1.1.1.1
        - dhcp-host=net:customdns,EC:79:49:51:64:16,192.168.1.187,ipl06002-lan
        - dhcp-host=net:customdns,F4:4E:E3:2C:C2:B6,192.168.1.56,ipl06002-wlan
        # DHCP Reservation with unrestricted youtube dns server
        - dhcp-option=net:youtubedns,6,192.168.1.234
        - dhcp-host=net:youtubedns,AC:3E:B1:A6:AF:D6,Pixel-7-Pro
        - dhcp-host=net:youtubedns,74:58:F3:E7:3A:04,Fire-Cube-lan
        - dhcp-host=net:youtubedns,48:43:DD:6E:CC:2D,Fire-Cube-wlan
affinity:
    podAntiAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchExpressions:
                    - key: app.kubernetes.io/name
                      operator: In
                      values:
                        - pihole
              topologyKey: kubernetes.io/hostname
sops:
    age:
        - recipient: age1d2g7tgqpfvxulsusn3m608h60h2hne7yqwv5nh5nd24z6h0hgq0skjkhw8
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBiZXNwZkhmVzZyVjlpVTNh
            TVpLTk80R2VKUVhDcnEyaDZHenQvYnNJVkFjCm9RMklLdnJyYklOY29DQlF1ejY1
            eTVlVUViUlo2elBZamVmYlNWdU5PYzAKLS0tIHI2VUF0bmR2cmtSTkNrcmdJZ1hw
            UWtYNFZFR2FaaHZkOUlhR1FsYnZhZHMKNgzXRZX4/lOT6veb1aSufMJ3uA8jzF4r
            ziuvSiq+DsW0/ZCpG6c2tCWZi3UXCGE8oe5u3yxND87qjwhT9Lo39w==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1q522xtgjrmvr43w7um5rh02ta3yfns635680hz4m7uhw0nfqj5zqgxnz27
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBsRUMxOXVZRDNRWUwzUlNX
            aDhudGV3RjJVVlhSclAyWEtrNEMzRXNPODJ3Ci9pTnArc0NjbFlpbEYwQS8yNEZs
            VGRJRG8xOVkrUUQrNXcxMnVTMzhuU2MKLS0tIFkwT1FXa0pxbVVjaGNJOTY3M3lE
            WnFyQkNFWFRTMTZjNnAwNDB0ejBHYk0KfHfqMKKzGkUJCzkruvKlyiVC7gi3SF3F
            GrXzoAp+1Wreaezfnug/r2Xmqr8GYvmS80NoHX7v9WdemdazuJzlKQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-06-25T09:54:42Z"
    mac: ENC[AES256_GCM,data:FGKnC+9ewbnkvFWg9Ho5ujwPN0CZFfXBKJ5zKjAekYs9+w6KoMSBXqCdnPnLhnzEiWVhoFB3Gf5KNZ5rCQdnEWkP04XO6wU1ktq4eil9sTZ0GtebeLo+Ll+TJz16Lo5gK9OaIo/qkIoc0ihAo86KV3TqF/qfnhmOujW48qIcYyg=,iv:FtoxSXk8NrDTeyQQ1yv4awkqgcN+QfF+y766p9d/0Sw=,tag:lp3PvJC5mwwmKF5q+y1byA==,type:str]
    encrypted_regex: ^(data|stringData|email|dnsNames|.*(H|h)osts?|hostname|username|password|url|issuer|argocdServerAdminPassword|oidc.config|commonName|literals|.*awsAccessKeyId|.*awsSecretAccessKey|.*defaultAdminPassword|apiToken|accountId|rootPassword|replicationPassword|adminPassword|root_url|client_secret|auth_url|api_url|PIHOLE_DOMAIN|TUNNEL_DNS_UPSTREAM|customDnsEntries|securityTokenKey|emailRecipients|.*provider_url|.*redirect_url|.*accesskeyEncryption|SEMAPHORE_WEB_ROOT|token|cookieEncryption|cookieHash)$
    version: 3.10.2
