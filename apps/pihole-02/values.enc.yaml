serviceDns:
    mixedService: true
    annotations:
        lbipam.cilium.io/ips: 192.168.1.234
    # type LoadBalancer with externalTrafficPolicy Local
    # requires 192.168.1.232 on the same node as the pod
    type: LoadBalancer
    #externalTrafficPolicy: Cluster
    #type: ClusterIP
serviceDhcp:
    enabled: false
virtualHost: ENC[AES256_GCM,data:JSrU0/PGrB9i3eyedYaJ5Ab28o+m5pB7rw==,iv:VcFOVKmnJitJTsPBThXZwzkP9aJ5acIABlmhBtlJM9o=,tag:7/JuZYjS9aX0iZ/T8rwa/A==,type:str]
ingress:
    enabled: true
    ingressClassName: traefik
    hosts:
        - ENC[AES256_GCM,data:ZMoUIbyDSVr7v/IbMoykOqmxOMTt8WHT/w==,iv:GlqL167shb33hcHYMSlK3aHx6waSxICadofo3eIcmws=,tag:9evAkQ/EgupPMo2xt1YaUw==,type:str]
    tls:
        - secretName: wildcard-cloudflare-production-01
          hosts:
            - ENC[AES256_GCM,data:2uZfE1ZGfNIO88hTl7wZk9Q2qArsyQOzkQ==,iv:Ybjl52vcy1HhZh8IMwEtJ0zmUMlpMP5MEOLbyvsXa1I=,tag:8KG2/B+xJLerx1RG9Is84g==,type:str]
    annotations:
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
        traefik.ingress.kubernetes.io/router.tls: "true"
        traefik.ingress.kubernetes.io/router.middlewares: authelia-forwardauth-authelia@kubernetescrd, traefik-root-to-admin@kubernetescrd
resources:
    limits:
        cpu: 1000m
        memory: 256Mi
    requests:
        cpu: 100m
        memory: 128Mi
extraEnvVars:
    TZ: Europe/Berlin
    FTLCONF_dns_bogusPriv: true
    FTLCONF_dns_domainNeeded: true
    FTLCONF_dns_domain: neese-web.de
    FTLCONF_webserver_interface_boxed: false
DNS1: 127.0.0.1:5053
DNS2: ""
# Not required because secured via authelia oidc
admin:
    enabled: false
doh:
    enabled: true
    envVars:
        TUNNEL_DNS_UPSTREAM: ENC[AES256_GCM,data:yXXjvocuCjXzf3vkN4codwTJvO4yNCdfmiCsn+3mGcXPyUR1rC8=,iv:619sJuwURaAxp0yyZ70hCWwS9+ybbSg7DwzAnRM5NX0=,tag:bMxPjMO7++TZfqmJItaakg==,type:str]
podDnsConfig:
    enabled: true
    policy: None
    nameservers:
        - 127.0.0.1
        - 1.1.1.1
capabilities:
    add:
        - NET_ADMIN
        - CAP_SYS_TIME
        - CAP_SYS_NICE
persistentVolumeClaim:
    enabled: true
    existingClaim: pihole-02
dnsmasq:
    customDnsEntries:
        - ENC[AES256_GCM,data:CP+j9LTQphuFaYJbuuK8NHFjnXJfMwUrXKE7Ebsfyx1hWNc=,iv:X2nQqvX9vEaNYps5hrZwN+Pzca5Qyd8ZUKIaXce1gaY=,tag:H44BTsAzVvlpuRgQuTC+1w==,type:str]
        - ENC[AES256_GCM,data:PDwIrSJJJp0boCZ37EFYVGBzGMp1rtS0UA==,iv:nF8ODozD2BhC0PsVMbZagvs7pPTcRcBxbZzTAP2lq6k=,tag:R7nE57/4STy+AvTFxeq3pQ==,type:str]
        - ENC[AES256_GCM,data:rSdPoHhrycXyZWGDOP7yJVA/OvSCBoLwa70jQEwQoacimwMcWAVrgg==,iv:7ikLGRUGRjzINgWuxXpCGFCY2syzNFGOxJ5lwRlAN/s=,tag:Pl4n0PnrLu6PTjLh8S2X8w==,type:str]
        - ENC[AES256_GCM,data:a/sHQAJvw9OcwiDeEmgZ/7XhTSxgMiemuaj8T7k=,iv:I1cXNmrjoQBmxLXi1yYwTIDHYROM5Gc7POwsTsGut6M=,tag:9RkTvvwdb1qDVO/qD1Oz2w==,type:str]
        - ENC[AES256_GCM,data:yydv2WO6JpnLppEMEZeAcpzdrtfZTOlcQKa1f0KhpbDD55HxI7l5qq5cqb9d/DXOeQ==,iv:XEGMQHQb4733kdf8JjFaaOYTHpgqHp+aL04PCL2pgA8=,tag:o1rvrZn40dm68+hGfKCJxw==,type:comment]
        - ENC[AES256_GCM,data:aQh09Wa08Jzm091ZVgCIrz+Nz8KUuV54K8LPNH0HyxPo42Vz09ia2l4fMRt3ACqxTIUtT1cnIlg=,iv:/ukQGfijXGzdxeXEO3J1N5jneK84axDKmL7fyHbJZN0=,tag:kgxF4djBjB9AUQrAyCXeNA==,type:comment]
        - ENC[AES256_GCM,data:QYlTDdqPtBzqFtaCrYkFOfc3Kop0X0pWs/+W4Pap453OcsRgUq7R9oA=,iv:4qrSz+g1Ef1LLCZ7+HeygxwlFefAgdowgeGWgBCyxBM=,tag:ZQfdyCLApUrFgoCsHLhKVw==,type:comment]
        - ENC[AES256_GCM,data:xgE8M7/JWwIKhMnRauPXs88GjsqB0gLx8fETlsoQUs8BlYf8y6Cj6b779QTRFMe+,iv:xWbkiVzYeQQHMaOZA6dIlWFiBcCmYYm0qGpxIQik2ik=,tag:pIDUx6Nmt7O+Mf/qmXk0Gg==,type:comment]
        - ENC[AES256_GCM,data:JlFAby3X9ghPkSBoGO9KMQnnQRKv1zgH6Z32wgzz6AQNq9P+J06e,iv:/ggr+qQ42t04IhRvJhWlj88zfUCQyWUtIHaenyenNCk=,tag:Pwu1mujCOJgYpAHgE7tNbQ==,type:comment]
        - ENC[AES256_GCM,data:vh1nCtlhU6mfk/VxIB+R+FhlxCUHY2s619eevFWAAD+/LwlxI0NFAfZVI5lh4A==,iv:Mi4MnETb6xdK0EYtxJRp/Tyd4Fgantul23Q3+1z0UF0=,tag:JN05wfeRDl5a8michGRGTQ==,type:comment]
        - ENC[AES256_GCM,data:+obVt9sssIC3p1/we42ToQuU5cKsFI1dAM9jnyapq13KyysJxlUMwmx5mbxv83th,iv:TTjNhOGJ7z+nnZ2d27r1hjzZgRgMU3ZgnF9yq0pwNJU=,tag:xSI1T1TYswCoNCVYIHV7cA==,type:comment]
        - ENC[AES256_GCM,data:AmGZzoPJvI2F1cHfsUMxf0eKnbCmmUo5ck6MYrxo78Qn7wnYLmP4RTNRBobcE9TPauhigPPMzQ==,iv:GQ7Yfd1l/nN9STbNMSZP5lo96avTVX9p9YLDTNVoTZw=,tag:3OXzXKkBYlHYg6l7Qj/uww==,type:comment]
        - ENC[AES256_GCM,data:WyxATd1tugUyUE68k2SrlzAcyGl2Pf6S4aot/qOMKGy+t117YBR4I4gaxoIH4VnjUm8=,iv:o/Z7s0+H6pmD4rv+EEIueDSdUcOv7wrFBAaF2zMevkI=,tag:tS8L6yDh8uJzOj8zXCjhMw==,type:comment]
        - ENC[AES256_GCM,data:GhlRjg721tticpJICq+iqOg9VwZ3O75ZJIX/9cIW3fJgIDaat0bvify8sHSKWtzIUuDn16TD0MUV,iv:31kd1EFyKG5qu2Spgok7Y8oBSpezi2uTx4XlKgEzBJA=,tag:2nFlNvmc1V6XlhkpL3GGSg==,type:comment]
    customSettings:
        - dhcp-option=252,"\n"
        - dhcp-option=vendor:MSFT,2,1i
        # DNS
        #- dhcp-option=6,192.168.1.232,192.168.1.1
        - dhcp-option=6,192.168.1.232,192.168.1.234
        # NTP
        - dhcp-option=42,192.168.1.1
        - dhcp-range=::,ra-names
        - server=/geekbundle.org/192.168.1.1
        - ptr-record=1.1.168.192.in-addr.arpa.,"despair"
        # TFTP Boot
        - dhcp-match=set:ipxe,175
        - dhcp-boot=tag:!ipxe,ipxe.pxe,dns01,192.168.1.11
        - dhcp-match=set:efi-x86_64,option:client-arch,7
        - dhcp-boot=tag:efi-x86_64,ipxe.efi,dns01,192.168.1.11
        - dhcp-boot=http://192.168.1.45:8043/boot.ipxe
        # DHCP Reservation with different dns server
        - dhcp-option=net:customdns,6,9.9.9.9,1.1.1.1
        - dhcp-host=net:customdns,EC:79:49:51:64:16,192.168.1.187,ipl06002-lan
        - dhcp-host=net:customdns,F4:4E:E3:2C:C2:B6,192.168.1.56,ipl06002-wlan
        # DHCP Reservation with unrestricted youtube dns server
        - dhcp-option=net:youtubedns,6,192.168.1.234
        - dhcp-host=net:youtubedns,AC:3E:B1:A6:AF:D6,Pixel-7-Pro
        - dhcp-host=net:youtubedns,74:58:F3:E7:3A:04,Fire-Cube-lan
        - dhcp-host=net:youtubedns,48:43:DD:6E:CC:2D,Fire-Cube-wlan
        - dhcp-host=net:youtubedns,00:e0:4c:7b:c2:98,Sanctuary
affinity:
    podAntiAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchExpressions:
                    - key: app.kubernetes.io/name
                      operator: In
                      values:
                        - pihole
              topologyKey: kubernetes.io/hostname
sops:
    age:
        - recipient: age1d2g7tgqpfvxulsusn3m608h60h2hne7yqwv5nh5nd24z6h0hgq0skjkhw8
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSByK01OajFJMUlvdlZGcUFE
            SmhmZlFhT0N5ZjJwL2Y2bS93dFkyaHVZa2o4Ckk0UkZVcCsrSjhSaGROc0d3ZDJH
            b1J0YTBHU215WGozdXBOU29XTk5qckUKLS0tIGRDdWt4Q1lvdlhFSjNRN0FmRVli
            Y2R0U1UxR3JLOXZzd2hZRytBNWwrT0EKlA1dwme6On383CDM64X5LUKvfURod/Ck
            g5lfddvs2LgdHDpR+cKxWS8aOVnIoM2psI2JzyIHMA9p1lfsh7Eq9A==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1q522xtgjrmvr43w7um5rh02ta3yfns635680hz4m7uhw0nfqj5zqgxnz27
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSAwK2V2ME9rQ2phaDVWTWY3
            TFRnaEtlTGNRWjVhSEg2UWN6d05DS1JYYVhBClo0bXkzbGVDTWtwSzJtSVlqV04y
            Wis1NXA1QWJMTGIyLzFabDhCQTJyY28KLS0tIEdrYlRyRk5JcW1zOENZZGR4MWJR
            a2JxT3JhM0UvVjNWVGdNUjVlcFd2ZTgKD2rR4FTa6iljI9djgexebSX/h/r7U4/b
            FZDwzF7dAaZjT3AAUD/eaazKqmIrUq1k3kdWbVCNCXPSxAGbpOirLQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-07-20T12:05:22Z"
    mac: ENC[AES256_GCM,data:aG6tboATd7uvKJJefv9MDSOpHKDsO6Ka1vTpAXPIuix/+2KotSaH0XQj8zjv/qCFsx/05s3pDOv1/XsjZN2ex0oYUKESD63hSvCTUXS+srAxsLpIYhifinR96397Oojaw7ZahHVuszsBPec52kIWJ9BAwdcqJmUNm3rYCN4c0XI=,iv:8nzeRvtsSkacWrPlo2HHRiS94jQLtsaVMzWrENyPJsg=,tag:1pNqLlbAgfiAcR8R+WcBZw==,type:str]
    encrypted_regex: ^(data|stringData|email|dnsNames|.*(H|h)osts?|hostname|username|password|url|issuer|argocdServerAdminPassword|oidc.config|commonName|literals|.*awsAccessKeyId|.*awsSecretAccessKey|.*defaultAdminPassword|apiToken|accountId|rootPassword|replicationPassword|adminPassword|root_url|client_secret|auth_url|api_url|PIHOLE_DOMAIN|TUNNEL_DNS_UPSTREAM|customDnsEntries|securityTokenKey|emailRecipients|.*provider_url|.*redirect_url|.*accesskeyEncryption|SEMAPHORE_WEB_ROOT|token|cookieEncryption|cookieHash)$
    version: 3.10.2
