serviceDns:
    mixedService: true
    annotations:
        lbipam.cilium.io/ips: 192.168.1.234
    # type LoadBalancer with externalTrafficPolicy Local
    # requires 192.168.1.232 on the same node as the pod
    type: LoadBalancer
    #externalTrafficPolicy: Cluster
    #type: ClusterIP
serviceDhcp:
    enabled: false
virtualHost: ENC[AES256_GCM,data:p0VWv/lR0HvaZF4JfxTUkx8rElTJ3XnXSA==,iv:p8zVd4zz2aEA328QHtjMK9CLNDc2slR6fDXhc2ODWbw=,tag:1oQXA+nWSq6imejVyuNyOg==,type:str]
ingress:
    enabled: true
    ingressClassName: traefik
    hosts:
        - ENC[AES256_GCM,data:ScP8GKg8m/ZtK1vI4rj2pkEY7OCYJ0L2qA==,iv:aFoBdXcDcCrX196GS8NlbLrxDC2QoEvqhJ5rxygbxBo=,tag:6fQ5/OUNfOJD/Vt8A0NI2w==,type:str]
    tls:
        - secretName: wildcard-cloudflare-production-01
          hosts:
            - ENC[AES256_GCM,data:DkopjTwk+WI4l9jYflpSrqn4CJVjXN0sdg==,iv:fpH3KanjxdfHl85c1mzz38/Cl8B9PGijh/TZlAdDdAI=,tag:OE3uJ0sJAqcKXfQm9G0WXQ==,type:str]
    annotations:
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
        traefik.ingress.kubernetes.io/router.tls: "true"
        traefik.ingress.kubernetes.io/router.middlewares: authelia-forwardauth-authelia@kubernetescrd, traefik-root-to-admin@kubernetescrd
resources:
    limits:
        cpu: 1000m
        memory: 256Mi
    requests:
        cpu: 100m
        memory: 128Mi
extraEnvVars:
    TZ: Europe/Berlin
    FTLCONF_dns_bogusPriv: true
    FTLCONF_dns_domainNeeded: true
    FTLCONF_dns_domain: neese-web.de
    FTLCONF_webserver_interface_boxed: false
DNS1: 127.0.0.1:5053
DNS2: ""
# Not required because secured via authelia oidc
admin:
    enabled: false
doh:
    enabled: true
    envVars:
        TUNNEL_DNS_UPSTREAM: ENC[AES256_GCM,data:Qs8HxizyBYtdcCPTMJT3zErTj4gszpP7GsKSXXgjPEjqJBL2N9E=,iv:+ZbApdSW6ZiAqwZyD69shmU6xNPu2stjM3+HA3mhwxQ=,tag:5oVVMoSIgbSuGLZhEdk23w==,type:str]
podDnsConfig:
    enabled: true
    policy: None
    nameservers:
        - 127.0.0.1
        - 1.1.1.1
capabilities:
    add:
        - NET_ADMIN
        - CAP_SYS_TIME
        - CAP_SYS_NICE
persistentVolumeClaim:
    enabled: true
    existingClaim: pihole-02
dnsmasq:
    customDnsEntries:
        - ENC[AES256_GCM,data:HNkGqB0a3zuN/YcHQ4wsCoY7ALECAw1N++GXmtFO2JB9c6w=,iv:13TsSHE3Qvc7FRnTIG1NodsKjbtG/CnGecZnT7B4sGI=,tag:EtNeLrandLYIcForLxJxmw==,type:str]
        - ENC[AES256_GCM,data:LccBz2W1/NF14dWigE6mhYPVt75VVQefpw==,iv:vC0SUtUMa1PlAMgmZzNrbtaiR8k+nM7Yw4NrqAowGXY=,tag:JRfcivFdJp0kF2kC8ZyAUQ==,type:str]
        - ENC[AES256_GCM,data:O2rtefHvTDIK+g/i/xILhKmZCjXAFlRwfU9QRdMq6HoXw7vexsvIOg==,iv:i4OH5EiReCoXTeUbuf/d8eckGGMdP5horsl6Q14p41k=,tag:90y3Ax0b0Q+3r/cB3EvWKQ==,type:str]
        - ENC[AES256_GCM,data:EktZ+Ekv6eNIg1apjUogVlCLPUtqzuQ3bBzKm7c=,iv:3Y8p6cdsDdL0Jh73ziNwr98YPS9dHY/OrGSXIMJC9JU=,tag:XdKQfaeY7HoxzTSnnjSJ8g==,type:str]
        - ENC[AES256_GCM,data:3yAyTAHUtQgu57qwQiB1JOwUw6Aw1lfc8B2Iecv322Ap7CCh5rNiqHwWzYoem3n+Yg==,iv:mQ0duVDW1oU9NWwfj3kc4jcU/iDiQmHQ8LpxZQcbKQQ=,tag:B4t9RyT/856cVJACfaQpew==,type:comment]
        - ENC[AES256_GCM,data:38+zYtjVkpdrTf5plpE4WRv1B74i6wIqJ8RBGb2lF/yz8+kEjfzAAyPzfXHH9VPQ29Oxung0oqA=,iv:WFf34AEZbuqdUrmbVCu4xQ3nROeMeyTExUO+fNQr7sI=,tag:nGAOaX3oH6ASwhaS5XcdeQ==,type:comment]
        - ENC[AES256_GCM,data:BL5u7f5jj3t+SgHREu/jgYiA0iNnZU9WLZgu5z+5az7yPx1RYgxiepA=,iv:S+oacV1PPqOxn715pGgJeF/CVYQWWAOtGurDmXx5pXY=,tag:ay+oB5fAi4uOwT0RnWma0A==,type:comment]
        - ENC[AES256_GCM,data:4wm03sNdYIwnfrLY4++2xiiXcC0dQQYxy5oGJgaycp581SAvVIgbuO8xnLrFqrgE,iv:89rUOCwdnO98A0RBtbH/GZA7QIYk41Njwhz1bAPY18Q=,tag:WLRvC/C4T2QC9ENl+VsKUw==,type:comment]
        - ENC[AES256_GCM,data:JKU3fB2piDc5gr/Ek84ZBH32zbDSPYN0lMUDnFKb4nxQH/iXHtag,iv:xZz/ii76QWtio2HSs+4+fUrWuZXYe4oPqptgdJREamo=,tag:Gwkw+kD29afOZs0+ara8Ew==,type:comment]
        - ENC[AES256_GCM,data:1Qs9m1PQQi/QypIgtaLrYyf6tQROEiKOm/MD/Ky1Y1k0VV3XOz6M+XBpLJbUqg==,iv:ZvIt1UF4QNHH6+Dv+hFQPPt1T7qOCG7TUXUAuU4Z1B0=,tag:9X/QNBHQ9Nq5C00HS6LjEw==,type:comment]
        - ENC[AES256_GCM,data:j0KUn8RDKYfX8vqGfQy5z56yzpeXndFHfjB6nNqaQUQCaFOQ+yCWhoTjLIhboyyr,iv:NNWU5svy555+XeiqRNleb1dbmXqJ7vQ1a541exo4jBE=,tag:dw7G0oRgSFJWnxatX+EKsQ==,type:comment]
        - ENC[AES256_GCM,data:OnbKj1LUy2kED9KgzPxZAsxwmJgBz0ZHSePy+tXBpqn1/R3LOoVkiu78JyaSf64bM8+0jjYnsg==,iv:PEAfE/7DyLVREUFZp5WgzF9LORprNDlNzZnpyEf04Lw=,tag:cwkjNL8SUGPLRZA8Okgw0Q==,type:comment]
        - ENC[AES256_GCM,data:swsJh4nDtdsVZ5F20e59SmVwwO9ORQK45eWeWnYfLjbU1o+XltGTA4BP4WhO9s4tBCQ=,iv:x+SKHVGHsXCtIvqHTXacilqIC0f0diJ4MJ1L59aXoAE=,tag:lA/KuchM+TcobkNk1gNQVg==,type:comment]
        - ENC[AES256_GCM,data:g40pACASBLn/Mmfzgq/2+KoVH3sLHVpTKRAk8EfJUFhs1lM5nOPyePzIE1U7vKj7BQmam99z9DYX,iv:dzO+x7Vc0wEqIzAyYqeBUm6WWDWDyzrGSsrEOZ83h7k=,tag:d61B6kVOjDRAvLBe7pExVQ==,type:comment]
    customSettings:
        - dhcp-option=252,"\n"
        - dhcp-option=vendor:MSFT,2,1i
        # DNS
        #- dhcp-option=6,192.168.1.232,192.168.1.1
        - dhcp-option=6,192.168.1.232
        # NTP
        - dhcp-option=42,192.168.1.1
        - dhcp-range=::,ra-names
        - server=/geekbundle.org/192.168.1.1
        - ptr-record=1.1.168.192.in-addr.arpa.,"despair"
        # TFTP Boot
        - dhcp-match=set:ipxe,175
        - dhcp-boot=tag:!ipxe,ipxe.pxe,dns01,192.168.1.11
        - dhcp-match=set:efi-x86_64,option:client-arch,7
        - dhcp-boot=tag:efi-x86_64,ipxe.efi,dns01,192.168.1.11
        - dhcp-boot=http://192.168.1.45:8043/boot.ipxe
        # DHCP Reservation with different dns server
        - dhcp-option=net:customdns,6,9.9.9.9,1.1.1.1
        - dhcp-host=net:customdns,EC:79:49:51:64:16,192.168.1.187,ipl06002-lan
        - dhcp-host=net:customdns,F4:4E:E3:2C:C2:B6,192.168.1.56,ipl06002-wlan
        # DHCP Reservation with unrestricted youtube dns server
        - dhcp-option=net:youtubedns,6,192.168.1.234
        - dhcp-host=net:youtubedns,AC:3E:B1:A6:AF:D6,Pixel-7-Pro
        - dhcp-host=net:youtubedns,E0:80:6B:37:56:83,Redmi-Note-11
        - dhcp-host=net:youtubedns,74:58:F3:E7:3A:04,Fire-Cube-lan
        - dhcp-host=net:youtubedns,48:43:DD:6E:CC:2D,Fire-Cube-wlan
        - dhcp-host=net:youtubedns,00:e0:4c:7b:c2:98,Sanctuary
affinity:
    podAntiAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchExpressions:
                    - key: app.kubernetes.io/name
                      operator: In
                      values:
                        - pihole
              topologyKey: kubernetes.io/hostname
sops:
    age:
        - recipient: age1d2g7tgqpfvxulsusn3m608h60h2hne7yqwv5nh5nd24z6h0hgq0skjkhw8
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA2bjZqbTBaQ1Z2Y0MrSUxJ
            RVJOSHcwWUF1MmZHQUt4VkJCUUVrSXpjemlJCmRickEwRmd5SGtaWG0rMVF5NXpK
            RERvQnBrQzVJVTFCbGlhS203SlU2WTQKLS0tIG8wK29NaG05TjEwYWVLazJieWV2
            eUdzTDVIRzJKYXFnMzNOZGNUbUUxSUEKvx9Zryvh3sjgXGLFd1CXb1uJP3OQxca1
            EftruIPEFi0CsYgS8c1ok2CrUVD1/sXSHh9EcDimuxo0S8OVO4tkCA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1q522xtgjrmvr43w7um5rh02ta3yfns635680hz4m7uhw0nfqj5zqgxnz27
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBPak1lQXlMWnViTXRicnp6
            bnVJSTNta25ibml6eTdONDN4T0lUc0tZWW5nCjFQZnpRUmZSZjRvd3YvbnVvay9i
            UEpXdGFpZGF1K0J2dml6Qzhlc0pXdWsKLS0tIEJDcmhaOHFvVHp5RGJ3bFZuUCto
            VkpyR1loN3NoYnZ0SzRRRUNKTzlQTk0KFGX51DjCfGdYIApSjk3I/NKXrPeH73Ae
            zm0qzX3YCjnuislNhTPjt/lR3WO1b+7Nfkuze4RmgFBWek1gIj9Y5g==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-08-02T21:17:24Z"
    mac: ENC[AES256_GCM,data:iknoHkPfyNyn5gp7luKR5x+A2WD6SIupUgdOl/K9ozf6uDrOxFKIy2MZEG7S+fZlsEidU1fkqR3tEHgSMDCvJ1T8wKdUwRkYsCMNtO1bJ42R0vZPT2EhE6XhXIsVOU3VeOP3p0EL1utsN8nhS1Of6EyXFkPB+mstyl1UtGAwSss=,iv:MQG195Yur4QmYKtEoJc2dLF/uloe9EuwTgsUMXMb40s=,tag:ZS48WAtdQty4mx8FIMAb2A==,type:str]
    encrypted_regex: ^(data|stringData|email|dnsNames|.*(H|h)osts?|hostname|username|password|url|issuer|argocdServerAdminPassword|oidc.config|commonName|literals|.*awsAccessKeyId|.*awsSecretAccessKey|.*defaultAdminPassword|apiToken|accountId|rootPassword|replicationPassword|adminPassword|root_url|client_secret|auth_url|api_url|PIHOLE_DOMAIN|TUNNEL_DNS_UPSTREAM|customDnsEntries|securityTokenKey|emailRecipients|.*provider_url|.*redirect_url|.*accesskeyEncryption|SEMAPHORE_WEB_ROOT|token|cookieEncryption|cookieHash)$
    version: 3.10.2
