image:
    repository: ghcr.io/pi-hole/pihole
    tag: 2025.11.0
    pullPolicy: IfNotPresent
revisionHistoryLimit: 2
serviceDns:
    mixedService: true
    annotations:
        lbipam.cilium.io/ips: 192.168.1.234
    # type LoadBalancer with externalTrafficPolicy Local
    # requires 192.168.1.232 on the same node as the pod
    type: LoadBalancer
    #externalTrafficPolicy: Cluster
    #type: ClusterIP
serviceDhcp:
    enabled: false
virtualHost: ENC[AES256_GCM,data:ys4+WlRCY4R71PjMZ9Kpm3DnPqb8mWglsXHidgHG,iv:RGVyox7gN0MvvuziCOZOFOYnm8aUNPTrsRYKy3ji8dU=,tag:uEMjMu4sZd8HhU1GyadTVQ==,type:str]
ingress:
    enabled: true
    ingressClassName: traefik
    hosts:
        - ENC[AES256_GCM,data:UvkpQPi4j4Heswehf/iTsIZnwehHNvQwO5H2nl6t,iv:O3CzJlUbXXBlK59yuCVoGY1sMuUQIbLwa8+QknmA/+A=,tag:gCsLOrJQ6+gZwCj2PyjDXw==,type:str]
    tls:
        - secretName: wildcard-cloudflare-production-02
          hosts:
            - ENC[AES256_GCM,data:kPmHS78Bxc+qasJgHoaefSzLwOaHiVf/Q97dsYPm,iv:A+H4U9m1AcguZSlno3sRzYhukc+VN+A/rWHXpicxHkg=,tag:RTE9O6EtUjmtgU3jpQv/iA==,type:str]
    annotations:
        traefik.ingress.kubernetes.io/router.entrypoints: web239, websecure239
        traefik.ingress.kubernetes.io/router.tls: "true"
        traefik.ingress.kubernetes.io/router.middlewares: authelia-forwardauth-authelia@kubernetescrd, traefik-root-to-admin@kubernetescrd
resources:
    limits:
        cpu: 1000m
        memory: 768Mi
    requests:
        cpu: 100m
        memory: 128Mi
extraEnvVars:
    TZ: Europe/Berlin
    FTLCONF_dns_bogusPriv: true
    FTLCONF_dns_domainNeeded: true
    FTLCONF_dns_domain_name: neese-web.de
    FTLCONF_webserver_interface_boxed: false
DNS1: 127.0.0.1:5053
DNS2: ""
# Not required because secured via authelia oidc
admin:
    enabled: false
doh:
    enabled: true
    envVars:
        TUNNEL_DNS_UPSTREAM: ENC[AES256_GCM,data:LjpvR7A0rAjtSW6sNdRFkeus8b6ZUVXeLyRW67vnSkeWfHzJWX0=,iv:ByLqwzXRHiPJbqpI206pk2/NCQjT2i1pZqH3lZQf94g=,tag:+bCtY2r6pWj5LRx35nY62A==,type:str]
podDnsConfig:
    enabled: true
    policy: None
    nameservers:
        - 1.1.1.1
        - 127.0.0.1
capabilities:
    add:
        - NET_ADMIN
        - CAP_SYS_TIME
        - CAP_SYS_NICE
persistentVolumeClaim:
    enabled: true
    existingClaim: pihole-02
dnsmasq:
    customDnsEntries:
        - ENC[AES256_GCM,data:kbWyX660bHevNofbJF8dul6beK3N+Ac9UYjLIhYQGI1LBZs=,iv:lxaod4fdzrR1DHyTbv2H0w98y1ALKBqoYYEjzf29SDo=,tag:18TeROCfWfZuhYATH2gKZg==,type:str]
        - ENC[AES256_GCM,data:B/eVoEklrMZTfWdGH5DNywGiL/RfltFcOQ==,iv:Kb05yW2eXHqZDwG949NlB6qhfrHkfvYo1KPDNnx9DuI=,tag:HaevtfifYUiy3MthymMRGA==,type:str]
        - ENC[AES256_GCM,data:hWzP1VCLs7U3bpPZvE/1+UycYA5tDErzmusPaBKjcrjVJHTRVEpiBw==,iv:7Fg//uwLz/uS3CuEK81oq0Omp5RAGhxZEy0KqLeijlE=,tag:ZL8uuPntLIvjeKnB/+Fe1g==,type:str]
        - ENC[AES256_GCM,data:u5mLasjl33ML/l9OyQKwakJjXDyO0F99WQnXQAs=,iv:iQIwFaydomqJY3wE5ikGa+nG13n6uC5QWB2i0f+35hg=,tag:TJUHfjRctJ84TjW+WooVXg==,type:str]
        - ENC[AES256_GCM,data:AMLQIRp9BssMuqTg2BzCvkXheeVdRBaaULiDr3Fwb5mmSDnhz6e4O0Cfqy1N,iv:BcN39B5uPat8OzSOHEujGM3Sb79fk2S4kiFAsxkqdoI=,tag:alZeldD6XyHeGrX+hzTghw==,type:str]
        - ENC[AES256_GCM,data:33ONZ6cM8smKlE1dXOYx1d0Wu0IZLJgH9olz5UZpvTaxfg==,iv:FDg1R8jtAAVM5VW9jeC48eqji48rz9wIcFFEZxjtvXs=,tag:xKHNdVY2QKbsPvsJYkp+8Q==,type:str]
        - ENC[AES256_GCM,data:9i/wA3bn1TwzVnISJQBiCW4ekSZnWhmc85cQapAwv6G0F00V02t2KwR1m336hxrp8Q==,iv:rJWuCmQIoeEqnRvNXbIBiS33ZMBwuphCIGpCHp63dP8=,tag:ywIkEo463bAHu6yPbqaOWg==,type:comment]
        - ENC[AES256_GCM,data:3gg8RB8O33h0NiYBc2V0CeDtLWhoveVkHVbNfzg/j8vjnuP+YOpISYK1kRDAecEFLtZlYZgxoXM=,iv:f/GN+77XOejMazUi17RX0arSDLtro5vnyQE04l0nI0g=,tag:g95QgHSxFSWMlZSBf+1Snw==,type:comment]
        - ENC[AES256_GCM,data:m0E5reWVEzmv+cFLO3O5liw/YemzyXjDrVpYk0YDjoeHTdVrUOfEjxk=,iv:TcHSMzI4bJPTI7Itptg04u+gr99QMTSlUeWpEz/qU/M=,tag:lwk//8xb/B97dwAcNvnIsA==,type:comment]
        - ENC[AES256_GCM,data:OsKBHTrPTMn1X2pimKPUMTuF59cR7x2YGoYuuDPzz+rnpZ9QxxfBpp1pePoaAQjV,iv:lWCeW2ymGvqF044dkW3oTdDx3Oj/RAV8m+P/JuiAPA0=,tag:OiUdA4TICBwiIVV9rsaKhA==,type:comment]
        - ENC[AES256_GCM,data:HLKFKVCDFGguGrX+L9s04ERRqMeY4Xw2f9D0LvUPE4+FC8lNRcKI,iv:+/UT9m4glsqHpS/vszafVb7rijckD/yO4Q6u4Gmdq+o=,tag:65a9qrJaOw0wrwaWjH+5hA==,type:comment]
        - ENC[AES256_GCM,data:CFgPhCoMCOfWvQSsicXykCNpci8et/5R/PutMMc+5zMguYtGAcvWcpnvzBWZxQ==,iv:5yzjfKVIvkBXPkskHH83a28sLpjGCeLTP2LHy55IQ7w=,tag:dmlwxFPMIIFR0/V/JzzdMA==,type:comment]
        - ENC[AES256_GCM,data:rSqbJ1273DMrT83RfD+Iy5vBZWuMkaLiDkfoPR1FIw+tz5sdZ7Kat0/efK+J3qdU,iv:tjSHpBHk67eksNjvVzZ86oaC8iMka3xzc4xRRM9lpS0=,tag:2t2YRo0uvS0ukumfPbvuVQ==,type:comment]
        - ENC[AES256_GCM,data:JiE6kznpW/Rvj4tzmo3zn8bVQareyNkDhafsfHXPNP3D8oojeSPMnIFNYwAZMPDr9Bhg1wSjbA==,iv:tesgGBIk/7vcbUu4X94IjQwcN5zDf883FUU59PFSbts=,tag:bTVAFl1kNkIiqtvTe4JSHA==,type:comment]
        - ENC[AES256_GCM,data:rR8Q2la8RCRYcEiPuSvVFI0OGnF9mhi8ReSOvfsbODEsLqXszHUhck/oxZSv52L80pc=,iv:Djcz/mWZx/qiQOUR6D5O8Rfufe870BHh5lX/NYfuGu8=,tag:sk8f684w1B55QIZCmWuzZA==,type:comment]
        - ENC[AES256_GCM,data:rlC/dEgSmzLyB/7hqdak754fysW4Tyg4G0uaaIhK3aAgFN1JR9GBf3DOoip2nCSIaEnmOh6ygv8v,iv:IxwEtQwuxWgpHKABwrAWWki7OZ0rpAMafMN72/ctXf8=,tag:0TWizHpuEulZ49EXSQbB0w==,type:comment]
    customSettings:
        - dhcp-option=252,"\n"
        - dhcp-option=vendor:MSFT,2,1i
        # DNS
        #- dhcp-option=6,192.168.1.232,192.168.1.1
        - dhcp-option=6,192.168.1.232
        # NTP
        - dhcp-option=42,192.168.1.1
        - dhcp-range=::,ra-names
        - server=/geekbundle.org/192.168.1.1
        - ptr-record=1.1.168.192.in-addr.arpa.,"despair"
        # TFTP Boot
        - dhcp-match=set:ipxe,175
        - dhcp-boot=tag:!ipxe,ipxe.pxe,dns01,192.168.1.45
        - dhcp-match=set:efi-x86_64,option:client-arch,7
        - dhcp-boot=tag:efi-x86_64,ipxe.efi,dns01,192.168.1.45
        - dhcp-boot=http://192.168.1.45:8043/boot.ipxe
        # DHCP Reservation with different dns server
        - dhcp-option=net:customdns,6,9.9.9.9,1.1.1.1
        - dhcp-host=net:customdns,EC:79:49:51:64:16,192.168.1.187,ipl06002-lan
        - dhcp-host=net:customdns,F4:4E:E3:2C:C2:B6,192.168.1.56,ipl06002-wlan
        # DHCP Reservation with unrestricted youtube dns server
        - dhcp-option=net:youtubedns,6,192.168.1.234
        - dhcp-host=net:youtubedns,AC:3E:B1:A6:AF:D6,Pixel-7-Pro
        - dhcp-host=net:youtubedns,E0:80:6B:37:56:83,Redmi-Note-11
        - dhcp-host=net:youtubedns,74:58:F3:E7:3A:04,Fire-Cube-lan
        - dhcp-host=net:youtubedns,48:43:DD:6E:CC:2D,Fire-Cube-wlan
        - dhcp-host=net:youtubedns,F0:27:2D:D7:41:97,Fire-Guest
        - dhcp-host=net:youtubedns,00:e0:4c:7b:c2:98,Sanctuary
        - dhcp-host=net:youtubedns,8c:8c:aa:32:ce:7a,IONB000201752-LAN
        - dhcp-host=net:youtubedns,4e:80:5d:ae:a9:dd,IONB000201752-WLAN
affinity:
    podAntiAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchExpressions:
                    - key: app.kubernetes.io/name
                      operator: In
                      values:
                        - pihole
              topologyKey: kubernetes.io/hostname
sops:
    age:
        - recipient: age1d2g7tgqpfvxulsusn3m608h60h2hne7yqwv5nh5nd24z6h0hgq0skjkhw8
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBoalM4R0o3ajlKSmpLdkpR
            cTc1WG8xalRrRzN5cXJ3TDF3SFJlUk4wZldRCkdsd1VtN09KdTVrRTkvZ0lSYUtt
            Tm9nMktTMCs3ekpaVnBDa0pQdXlyOUEKLS0tIEVOVVU3MHNuTnhsVkgrTnF0VEdl
            MDRxRExVaUp2TDVRbXovc3lPUWtiYjgKDQfDHbBfuzQmjlEzu4C3MvX/ek2yJsor
            wNMHpgTK7rQf8fab0TKJT0sQ2yz0Jcf5RF4HPK2XFaL+sqvhu/lf0w==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1q522xtgjrmvr43w7um5rh02ta3yfns635680hz4m7uhw0nfqj5zqgxnz27
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBqbm1CN1FLN0t4OXFNWldq
            ZWVma3NRdVZGV2QvSEdPVnA1MnVONitTTmtZCm91c2cwUUhLL09nQ0tlTU1BRWdz
            cCt2NmhSUE1CaUVHZ2NmQnhsc0NEQTQKLS0tIGlkKzhnTkdjc1VTUllVMXdtOTNM
            MU5xdjYrQkwvWEYzNTdoRnFMTlRVWDQKbjLMdBo/l2shXq99q41QR0Ixs5GGv49b
            8OdOAw4MWZmQItoouxzGbbUKRanydm50iuro36BWKqMdR+DY1T4pOQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-12-01T07:51:01Z"
    mac: ENC[AES256_GCM,data:pQzy+DICjA9p9yFH7xk+UsMjeeXGISSfZasWkdLPUcJtcZGYsUY7778kyLj+sE+sZdn6hBd++Fuyt/QYCClaiPtcfwgvoCitmJwSTx51rembA3JS49O04LKJ0OxkdIzJ1yrqF42fRAP35ThapOP5Va5DmUOqGgnHzIOX2W1wSUs=,iv:QU8gDQD0y1ZKUMPgUR/xunfWvb/x4Hx6JR2z0gMxw8g=,tag:Icsf69OAGjFbnzg+hoAETA==,type:str]
    encrypted_regex: ^(data|stringData|email|dnsNames|.*(H|h)osts?|hostname|username|password|url|issuer|argocdServerAdminPassword|oidc.config|commonName|literals|.*awsAccessKeyId|.*awsSecretAccessKey|.*defaultAdminPassword|apiToken|accountId|rootPassword|replicationPassword|adminPassword|root_url|client_secret|auth_url|api_url|PIHOLE_DOMAIN|TUNNEL_DNS_UPSTREAM|customDnsEntries|securityTokenKey|emailRecipients|.*provider_url|.*redirect_url|.*accesskeyEncryption|SEMAPHORE_WEB_ROOT|token|cookieEncryption|cookieHash|^ldap|.*match)$
    version: 3.11.0
