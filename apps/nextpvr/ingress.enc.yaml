apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
    name: nextpvr
    namespace: media
    labels:
        app.kubernetes.io/name: nextpvr
    annotations:
        # HTTPS entrypoint enabled
        traefik.ingress.kubernetes.io/router.entrypoints: web239,websecure239
        # TLS enabled
        traefik.ingress.kubernetes.io/router.tls: "true"
        traefik.ingress.kubernetes.io/router.middlewares: traefik-redirect@kubernetescrd, authelia-forwardauth-authelia@kubernetescrd
spec:
    ingressClassName: traefik
    tls:
        - hosts:
            - ENC[AES256_GCM,data:OW0QGh2oIPhXzF+deVShCB8QNU8WthB5OAlnCek=,iv:Ys4pSCYlsD44ESHj+QcDO45R0pVEm/qPPYHLUyrhGX0=,tag:JCXKV0o5+sVp1FfPLTI0/A==,type:str]
          secretName: wildcard-cloudflare-production-02
    rules:
        - host: ENC[AES256_GCM,data:fO5npoLIVjtNw4cgiQNFGWPTYlV/pe2KzcLzU8I=,iv:rvNrPkE8I9VqBHyWY4xDngBcoYnuGjwvBGRWtXRCpPU=,tag:I23rvi6S0cdjswlAjVbRTg==,type:str]
          http:
            paths:
                - path: /
                  pathType: Prefix
                  backend:
                    service:
                        name: nextpvr
                        port:
                            number: 8866
sops:
    age:
        - recipient: age1d2g7tgqpfvxulsusn3m608h60h2hne7yqwv5nh5nd24z6h0hgq0skjkhw8
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBmSGg2WXlSa1gyQnM5NnEy
            K1MwbzZia1VGUkxKWWJMVExvUjBLQzZHNGo4CjdibEMweTR6ZGdiVXVjWDBtM3li
            VDFJcDlidmgwNHVGUDBrK0g5aGhYbHcKLS0tIEJObmNzWVJ2YTcxNzZoVnBXSVVJ
            TUw4YldlL09tQ2UxVWpjdGIrdWY0Q2MK2hlFGNEdsuF36VW0qmXUUa7hKh0emNT1
            uRJ8LZ+xsOaO4qXPv6deks7oiMpG17LcupwRLQ2mwHFFX1/y5iLGew==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1q522xtgjrmvr43w7um5rh02ta3yfns635680hz4m7uhw0nfqj5zqgxnz27
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBtRXBIdjhmb01SVmQ3Q3h4
            KzVEZHA5Szl0UUxEOGtNcGJiUTZWaC9UMEZvCjZqdi9tSU80NVlwMmtTdHBXU1px
            cHpMdzNSMDdtSkxLdnBMNmU5Wi9rU2sKLS0tIFg0M2Y1TWRyWElXclMxMGdvZEVv
            aFNaRkM5MFRaV2J3RHZoeEhhK2g5NlkKvj0iF6RXP0A1fDINQznkyS6pq648MhXC
            JUepuSHTPVU3UPygyMpDgFn1LhKu+M+kOHfRIxhhWeSxrKMr/mcfYg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-10-13T19:31:48Z"
    mac: ENC[AES256_GCM,data:1uEMiMe2PBi0JlOHlsqUuyNlBPGtQvwernVCZD8iUo4hm3JOrpjKXN9YXA6J0kxAduZEVPZYQuaP8SR3WDlctxJ5kIPm68qXGJdh4OLdoqmrx+f2/rPPYsIH5GWmzseoYi1tsDf3ArU8Z3bGB6G0zskl1B+8R7ThwT5hM1i/GcA=,iv:ByxojOGaVTTkACxMpel35DVcedug+/3LZTtNpITEjXY=,tag:SAODH55gndQr03ZJH5v6tA==,type:str]
    encrypted_regex: ^(data|stringData|email|dnsNames|.*(H|h)osts?|hostname|username|password|url|issuer|argocdServerAdminPassword|oidc.config|commonName|literals|.*awsAccessKeyId|.*awsSecretAccessKey|.*defaultAdminPassword|apiToken|accountId|rootPassword|replicationPassword|adminPassword|root_url|client_secret|auth_url|api_url|PIHOLE_DOMAIN|TUNNEL_DNS_UPSTREAM|customDnsEntries|securityTokenKey|emailRecipients|.*provider_url|.*redirect_url|.*accesskeyEncryption|SEMAPHORE_WEB_ROOT|token|cookieEncryption|cookieHash)$
    version: 3.11.0
