---
# Default Deny Network Policy for whoami namespace
# This policy applies to ALL pods in the whoami namespace
# It provides baseline security rules that all pods inherit
apiVersion: cilium.io/v2
kind: CiliumNetworkPolicy
metadata:
  name: whoami-default-deny
  namespace: whoami
spec:
  endpointSelector: {}  # Empty selector = matches ALL pods in this namespace

  # Use an allow rule that never matches to put pods into default-deny mode
  ingress:
    - {}
  #- fromEndpoints:
  #  - matchLabels:
  #      cilium.io/default-deny: "never-match"

  # Same pattern for egress: no destinations match this label, so nothing is allowed by default
  egress:
    - {}
  #- toEndpoints:
  #  - matchLabels:
  #      cilium.io/default-deny: "never-match"
